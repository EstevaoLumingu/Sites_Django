{% extends "main/base.html" %}
{% block title %}Minhas Notificações{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary fw-bold"><i class="fas fa-bell fa-shake"></i> Minhas Notificações</h2>
    <a href="{% url 'marcar_todas_lidas' %}" class="btn btn-outline-success btn-sm shadow-sm">
      <i class="fas fa-check-double"></i> Marcar todas como lidas
    </a>
  </div>

  {% if notificacoes %}
    <div class="list-group">
      {% for n in notificacoes %}
        <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-start border rounded shadow-sm mb-2
                    {% if not n.lida %}bg-light{% endif %}" data-aos="fade-up">
          <div class="ms-2 me-auto">
            {% if not n.lida %}
              <span class="badge bg-success me-1"><i class="fas fa-circle"></i></span>
            {% endif %}
            <div class="fw-semibold">{{ n.mensagem }}</div>
            <small class="text-muted">{{ n.criada_em|date:"d M Y · H:i" }}</small>
          </div>
          <div class="ms-3">
            {% if not n.lida %}
              <a href="{% url 'marcar_lida' n.id %}" class="btn btn-outline-primary btn-sm">
                <i class="fas fa-eye"></i> visualizada
              </a>
            {% elif n.link %}
              <a href="{{ n.link }}" class="btn btn-outline-secondary btn-sm">
                <i class="fas fa-arrow-right"></i> Ir
              </a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info shadow-sm" data-aos="fade-in">
      <i class="fas fa-info-circle"></i> Nenhuma notificação disponível por enquanto.
    </div>
  {% endif %}
</div>

<style>
  .fa-shake {
    animation: shake 1s infinite alternate;
  }

  @keyframes shake {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(3deg); }
  }

  .list-group-item {
    transition: background-color 0.3s ease, transform 0.3s ease;
  }

  .list-group-item:hover {
    transform: scale(1.01);
    background-color: #eef9ff !important;
  }
</style>
{% endblock %}
